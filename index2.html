<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stage & Weight Calculator</title>

<style>
:root{
  --yellow1:#f7c400;
  --yellow2:#e0a800;
  --panel:#b88900;
  --panel2:#d6a600;
  --slot:#ffd84a;
  --green:#00e676;
  --green-dark:#00b85c;
  --blue:#4fc3ff;
  --shadow:rgba(0,0,0,.35);
}

*{box-sizing:border-box;font-family:"Trebuchet MS",Arial,sans-serif}

body{
  margin:0;
  min-height:100vh;
  background:radial-gradient(circle at top,#3cff85,#00b85c 60%);
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}

.main{
  width:1400px;
  max-width:96vw;
  background:linear-gradient(180deg,var(--yellow1),var(--yellow2));
  border-radius:28px;
  padding:18px;
  box-shadow:0 30px 90px var(--shadow);
}

.topbar{
  background:linear-gradient(180deg,#ffe681,#ffd33d);
  border-radius:18px;
  padding:10px 16px;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 6px 0 rgba(0,0,0,.25);
}

.title{
  font-size:34px;
  font-weight:900;
  color:#3b66ff;
  text-shadow:0 2px 0 rgba(0,0,0,.25);
}

.panel{
  margin-top:14px;
  background:linear-gradient(180deg,var(--panel2),var(--panel));
  border-radius:22px;
  padding:16px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
  box-shadow:inset 0 -6px 0 rgba(0,0,0,.18);
}

.card{
  background:linear-gradient(180deg,#ffd84a,#e6b800);
  border-radius:20px;
  padding:14px;
  display:flex;
  flex-direction:column;
  gap:10px;
  box-shadow:0 10px 30px var(--shadow), inset 0 -5px 0 rgba(0,0,0,.2);
}

.card-title{
  background:linear-gradient(180deg,#fff0a6,#ffd33d);
  border-radius:14px;
  padding:8px;
  text-align:center;
  font-size:22px;
  font-weight:900;
  color:#3b66ff;
  text-shadow:0 2px 0 rgba(0,0,0,.25);
}

label{
  font-weight:900;
  color:white;
  text-shadow:0 1px 0 rgba(0,0,0,.25);
  font-size:14px;
}

input,select{
  width:100%;
  border:none;
  border-radius:14px;
  padding:12px;
  background:#ffe88a;
  font-weight:900;
  font-size:15px;
  outline:none;
  box-shadow:inset 0 -3px 0 rgba(0,0,0,.25);
}

.options{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}

.option{
  flex:1;
  background:linear-gradient(180deg,#fff0a6,#ffd33d);
  border-radius:12px;
  padding:8px;
  display:flex;
  align-items:center;
  gap:6px;
  font-weight:900;
  color:#2b2b2b;
  box-shadow:inset 0 -3px 0 rgba(0,0,0,.25);
}

button{
  margin-top:6px;
  border:none;
  border-radius:16px;
  padding:12px;
  font-size:22px;
  font-weight:900;
  color:white;
  background:linear-gradient(180deg,var(--green),var(--green-dark));
  box-shadow:0 6px 0 rgba(0,0,0,.3);
  cursor:pointer;
}

.results{
  background:linear-gradient(180deg,#fff0a6,#ffd33d);
  border-radius:14px;
  padding:10px;
  font-weight:900;
  color:#2b2b2b;
  line-height:1.6;
  box-shadow:inset 0 -3px 0 rgba(0,0,0,.25);
}
</style>
</head>
<body>

<div class="main">
  <div class="topbar">
    <div class="title">üèã Stage & Weight Calculator üèã</div>
  </div>

  <div class="panel">

    <div class="card">
      <div class="card-title">Stage & Weight</div>

      <label>Select stage</label>
      <select id="stageSelect"></select>

      <label>Search weight</label>
      <input id="weightSearch" placeholder="Type your weight name...">

      <label>Clicks per second</label>
      <input id="cps" placeholder="e.g. 1">

      <div class="options">
        <label class="option"><input id="gpMuscle" type="checkbox"> 2√ó Muscles</label>
        <label class="option"><input id="gpCoins" type="checkbox"> 2√ó Coins</label>
        <label class="option"><input id="fast" type="checkbox"> Faster Lifter</label>
      </div>

      <button onclick="calculate()">Calculate</button>
    </div>

    <div class="card">
      <div class="card-title">Next Weight Result</div>
      <div class="results" id="resultBox">Fill inputs and press Calculate.</div>
    </div>

  </div>
</div>

<script>
let stages = [];
let weights = [];

async function loadData() {
  try {
    const stagesRes = await fetch("stages.json");
    const weightsRes = await fetch("weights.json");
    stages = await stagesRes.json();
    weights = await weightsRes.json();
    populateStages();
  } catch(e) {
    console.error("Error loading JSON:", e);
  }
}

function populateStages() {
  const stageSelect = document.getElementById("stageSelect");
  stages.forEach(s=>{
    const o = document.createElement("option");
    o.value = s.n;
    o.textContent = `Stage ${s.n} ‚Äî x${s.m}`;
    stageSelect.appendChild(o);
  });
}

function calculate() {
  const stageIndex = Number(document.getElementById("stageSelect").value);
  const stage = stages.find(s => s.n === stageIndex);
  const cpsInput = Number(document.getElementById("cps").value) || 0;
  const weightName = document.getElementById("weightSearch").value.toLowerCase();
  const gpMuscle = document.getElementById("gpMuscle").checked;
  const fast = document.getElementById("fast").checked;
  const resultBox = document.getElementById("resultBox");

  const weight = weights.find(w => w.stage === stage.n && w.name.toLowerCase().includes(weightName));
  if(!weight) return resultBox.textContent = "Weight not found in this stage.";

  let gain = weight.gain;
  if(gpMuscle) gain *= 2;

  let cps = cpsInput;
  if(fast) cps *= 1.866;

  const perSecond = gain * cps;
  
  const seconds = weight.cost / perSecond;

  resultBox.innerHTML = `
Stage: x${stage.m}<br>
Weight: ${weight.name}<br>
Weight cost: ${weight.cost.toLocaleString()} muscles<br>
Muscles per second: ${perSecond.toLocaleString()}<br>
Time needed: ${(seconds/60).toFixed(2)} minutes
  `;
}

// Load JSON when page loads
loadData();
</script>

</body>
</html>
